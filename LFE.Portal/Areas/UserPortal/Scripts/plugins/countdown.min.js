!function(a){"use strict";a.extend=function(b,c){if(b=b||{},arguments.length>2)for(var d=1;d<arguments.length;d++)a.extend(b,arguments[d]);else for(var e in c)b[e]=c[e];return b};var b=function(b){this.conf=a.extend({dateStart:new Date,dateEnd:new Date((new Date).getTime()+864e5),selector:".timer",msgBefore:"Be ready!",msgAfter:"It's over, sorry folks!",msgPattern:"{days} days, {hours} hours, {minutes} minutes and {seconds} seconds left.",onStart:null,onEnd:null,leadingZeros:!1},b),this.selector=document.querySelectorAll(this.conf.selector),this.interval=1e3,this.now=new Date,this.patterns=[{pattern:"{years}",secs:31536e3},{pattern:"{months}",secs:2628e3},{pattern:"{weeks}",secs:604800},{pattern:"{days}",secs:86400},{pattern:"{hours}",secs:3600},{pattern:"{minutes}",secs:60},{pattern:"{seconds}",secs:1}],this.init()};b.prototype.init=function(){this.defineInterval(),this.now<this.conf.dateEnd&&this.now>=this.conf.dateStart?(this.run(),this.callback("start")):this.outOfInterval()},b.prototype.run=function(){var b=this.now.valueOf()/1e3,c=this.conf.dateEnd.valueOf()/1e3,d=Math.abs(c-b),e=this,f=a.setInterval(function(){d--,d>0?e.display(d):(a.clearInterval(f),e.outOfInterval(),e.callback("end"))},this.interval);this.display(d)},b.prototype.display=function(a){for(var b=this.conf.msgPattern,c=0;c<this.patterns.length;c++){var d=this.patterns[c];if(-1!==this.conf.msgPattern.indexOf(d.pattern)){var e=Math.floor(a/d.secs),f=this.conf.leadingZeros&&9>=e?"0"+e:e;a-=e*d.secs,b=b.replace(d.pattern,f)}}for(var g=0;g<this.selector.length;g++)this.selector[g].innerHTML=b},b.prototype.defineInterval=function(){for(var a=this.patterns.length;a>0;a--){var b=this.patterns[a-1];if(-1!==this.conf.msgPattern.indexOf(b.pattern))return void(this.interval=1e3*b.secs)}},b.prototype.outOfInterval=function(){for(var a=this.now<this.conf.dateStart?this.conf.msgBefore:this.conf.msgAfter,b=0;b<this.selector.length;b++)this.selector[b].innerHTML=a},b.prototype.callback=function(b){b=b.capitalize(),"function"==typeof this.conf["on"+b]&&this.conf["on"+b](),"undefined"!=typeof a.jQuery&&a.jQuery(this.conf.selector).trigger("countdown"+b)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},a.Countdown=b}(window);